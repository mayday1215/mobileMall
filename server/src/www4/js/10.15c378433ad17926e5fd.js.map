{"version":3,"sources":["webpack:///src/pages/product.vue","webpack:///./src/pages/product.vue?eefd","webpack:///./src/pages/product.vue"],"names":["product","data","tabIndex","id","this","$route","params","computed","isLike","_this","likeList","find","item","product_id","Array","isArray","$store","user","likeIcon","parseInt","mounted","_this2","$axios","get","then","res","errcode","methods","like","_this3","i","length","splice","likes","post","push","buy","sessionStorage","buyProducts","stringify_default","name","price","cover","count","$router","addCart","_this4","cart","$Toast","isNewProduct","forEach","_product","checked","localStorage","sorry","pages_product","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","fixed","left-arrow","left-text","title","on","click-left","$event","back","_v","autoplay","_l","img","key","src","path","_s","span","stock","sales","sticky","model","value","callback","$$v","expression","property","detail","icon","click","type","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"www4/js/10.15c378433ad17926e5fd.js","sourcesContent":["<template>\r\n  <div class=\"goods\">\r\n    <van-nav-bar fixed left-arrow left-text=\"返回\" @click-left=\"$router.back()\" title=\"详情\"></van-nav-bar>\r\n\r\n    <!-- <div class=\"list\"> -->\r\n    <van-swipe class=\"goods-swipe\" :autoplay=\"3000\">\r\n      <van-swipe-item v-for=\"img in product.imgList\" :key=\"`img-${img.id}`\">\r\n        <van-image :src=\"img.path\" />\r\n      </van-swipe-item>\r\n    </van-swipe>\r\n\r\n    <van-cell-group>\r\n      <van-cell>\r\n        <div class=\"goods-title\">{{ product.name }}</div>\r\n        <div class=\"goods-price\">￥{{ product.price }}</div>\r\n      </van-cell>\r\n      <van-cell class=\"goods-express\">\r\n        <van-col span=\"10\">免运费</van-col>\r\n        <van-col span=\"14\">剩余：{{product.stock}}件</van-col>\r\n      </van-cell>\r\n      <van-cell class=\"goods-express\">\r\n        <van-col span=\"10\">销量：{{product.sales}}</van-col>\r\n        <van-col span=\"14\">收藏数：{{product.likes}}</van-col>\r\n      </van-cell>\r\n    </van-cell-group>\r\n\r\n    <van-tabs v-model=\"tabIndex\" sticky>\r\n      <van-tab title=\"详情\">\r\n        <van-image v-for=\"img in product.detailImgList\" :src=\"img.path\" :key=\"`detail-img-${img.id}`\"></van-image>\r\n      </van-tab>\r\n      <van-tab title=\"参数\">\r\n        <van-cell class=\"goods-express\" v-for=\"property in product.properties\" :key=\"`property-${property.id}`\">\r\n          <van-col span=\"10\">{{property.name}}</van-col>\r\n          <van-col span=\"14\">{{property.detail}}</van-col>\r\n        </van-cell>\r\n      </van-tab>\r\n    </van-tabs>\r\n    <!-- </div> -->\r\n\r\n    <van-goods-action>\r\n      <van-goods-action-icon :icon=\"likeIcon\" @click=\"like\">\r\n        收藏\r\n      </van-goods-action-icon>\r\n      <van-goods-action-icon icon=\"cart-o\" @click=\"$router.push({name:'cart'})\">\r\n        购物车\r\n      </van-goods-action-icon>\r\n      <van-goods-action-button type=\"warning\" @click=\"addCart\">\r\n        加入购物车\r\n      </van-goods-action-button>\r\n      <van-goods-action-button type=\"danger\" @click=\"buy\">\r\n        立即购买\r\n      </van-goods-action-button>\r\n    </van-goods-action>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        tabIndex: 0,\r\n        product: { id: this.$route.params.id }\r\n      }\r\n    },\r\n    computed: {\r\n      isLike() {\r\n        return this.likeList.find(item => item.product_id == this.id) ? true : false\r\n      },\r\n      likeList() {\r\n        return Array.isArray(this.$store.user.likeList) ? this.$store.user.likeList : []\r\n      },\r\n      likeIcon() {\r\n        return this.isLike ? 'like' : 'like-o'\r\n      },\r\n      id() {\r\n        return parseInt(this.$route.params.id)\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$axios.get(`/product?id=${this.id}`).then(res => {\r\n        if (res.errcode === 0) {\r\n          this.product = res.data\r\n        }\r\n      })\r\n    },\r\n    methods: {\r\n      like() {\r\n        if (this.isLike) {\r\n          this.$axios.get(`/product_like/delete?product_id=${this.id}`).then(res => {\r\n            if (res.errcode === 0) {\r\n              for(let i = 0; i < this.$store.user.likeList.length; i++){\r\n                if(this.id == this.$store.user.likeList[i].product_id){\r\n                  this.$store.user.likeList.splice(i, 1)\r\n                  this.product.likes--\r\n                  break\r\n                }\r\n              }\r\n            }\r\n          })\r\n        } else {\r\n          this.$axios.post(`/product_like/create`, {\r\n            product_id: this.id\r\n          }).then(res => {\r\n            if (res.errcode === 0) {\r\n              this.$store.user.likeList.push(res.data)\r\n              this.product.likes++\r\n            }\r\n          })\r\n        }\r\n\r\n      },\r\n      buy() {\r\n        sessionStorage.buyProducts = JSON.stringify([{ product_id: this.id, name: this.product.name, price: this.product.price, cover: this.product.cover, count: 1 }])\r\n        this.$router.push({ name: 'orderConfirm' })\r\n      },\r\n      addCart() {\r\n        this.$axios.post('/cart/update', {\r\n          product_id: this.id\r\n        }).then(res => {\r\n          if (res.errcode === 0) {\r\n            this.$store.cart = res.data\r\n            this.$Toast('添加成功！')\r\n          } else if (res.errcode === 90101) {\r\n            let isNewProduct = true\r\n            this.$store.cart.forEach(item => {\r\n              if (item.product_id === this.id) {\r\n                item.count++\r\n                isNewProduct = false\r\n              }\r\n            })\r\n            if (isNewProduct) {\r\n              let { name, price, cover } = this.product\r\n              this.$store.cart.push({\r\n                product_id: this.id,\r\n                count: 1,\r\n                name,\r\n                price,\r\n                cover,\r\n                checked: 1\r\n              })\r\n            }\r\n            localStorage.cart = JSON.stringify(this.$store.cart)\r\n          }\r\n        })\r\n      },\r\n      sorry() {\r\n        this.$Toast('有待开发~')\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n  .goods {\r\n    padding-top: 46px;\r\n    padding-bottom: 100px;\r\n  }\r\n\r\n  .van-icon-like {\r\n    color: red;\r\n  }\r\n\r\n  .goods-title {\r\n    font-size: 16px;\r\n  }\r\n\r\n  .goods-price {\r\n    color: #f44;\r\n  }\r\n\r\n  .goods-express {\r\n    color: #999;\r\n    font-size: 12px;\r\n    padding: 5px 15px;\r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/product.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"goods\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"left-arrow\":\"\",\"left-text\":\"返回\",\"title\":\"详情\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_vm._v(\" \"),_c('van-swipe',{staticClass:\"goods-swipe\",attrs:{\"autoplay\":3000}},_vm._l((_vm.product.imgList),function(img){return _c('van-swipe-item',{key:(\"img-\" + (img.id))},[_c('van-image',{attrs:{\"src\":img.path}})],1)}),1),_vm._v(\" \"),_c('van-cell-group',[_c('van-cell',[_c('div',{staticClass:\"goods-title\"},[_vm._v(_vm._s(_vm.product.name))]),_vm._v(\" \"),_c('div',{staticClass:\"goods-price\"},[_vm._v(\"￥\"+_vm._s(_vm.product.price))])]),_vm._v(\" \"),_c('van-cell',{staticClass:\"goods-express\"},[_c('van-col',{attrs:{\"span\":\"10\"}},[_vm._v(\"免运费\")]),_vm._v(\" \"),_c('van-col',{attrs:{\"span\":\"14\"}},[_vm._v(\"剩余：\"+_vm._s(_vm.product.stock)+\"件\")])],1),_vm._v(\" \"),_c('van-cell',{staticClass:\"goods-express\"},[_c('van-col',{attrs:{\"span\":\"10\"}},[_vm._v(\"销量：\"+_vm._s(_vm.product.sales))]),_vm._v(\" \"),_c('van-col',{attrs:{\"span\":\"14\"}},[_vm._v(\"收藏数：\"+_vm._s(_vm.product.likes))])],1)],1),_vm._v(\" \"),_c('van-tabs',{attrs:{\"sticky\":\"\"},model:{value:(_vm.tabIndex),callback:function ($$v) {_vm.tabIndex=$$v},expression:\"tabIndex\"}},[_c('van-tab',{attrs:{\"title\":\"详情\"}},_vm._l((_vm.product.detailImgList),function(img){return _c('van-image',{key:(\"detail-img-\" + (img.id)),attrs:{\"src\":img.path}})}),1),_vm._v(\" \"),_c('van-tab',{attrs:{\"title\":\"参数\"}},_vm._l((_vm.product.properties),function(property){return _c('van-cell',{key:(\"property-\" + (property.id)),staticClass:\"goods-express\"},[_c('van-col',{attrs:{\"span\":\"10\"}},[_vm._v(_vm._s(property.name))]),_vm._v(\" \"),_c('van-col',{attrs:{\"span\":\"14\"}},[_vm._v(_vm._s(property.detail))])],1)}),1)],1),_vm._v(\" \"),_c('van-goods-action',[_c('van-goods-action-icon',{attrs:{\"icon\":_vm.likeIcon},on:{\"click\":_vm.like}},[_vm._v(\"\\n      收藏\\n    \")]),_vm._v(\" \"),_c('van-goods-action-icon',{attrs:{\"icon\":\"cart-o\"},on:{\"click\":function($event){return _vm.$router.push({name:'cart'})}}},[_vm._v(\"\\n      购物车\\n    \")]),_vm._v(\" \"),_c('van-goods-action-button',{attrs:{\"type\":\"warning\"},on:{\"click\":_vm.addCart}},[_vm._v(\"\\n      加入购物车\\n    \")]),_vm._v(\" \"),_c('van-goods-action-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.buy}},[_vm._v(\"\\n      立即购买\\n    \")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-95b94f6e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/product.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-95b94f6e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./product.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./product.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./product.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-95b94f6e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./product.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-95b94f6e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/product.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}