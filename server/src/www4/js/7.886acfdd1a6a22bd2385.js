webpackJsonp([7],{"2NXm":function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("van-nav-bar",{attrs:{title:"精选"}},[i("div",{attrs:{slot:"left"},on:{click:function(s){return t.$router.push({name:"citySelect"})}},slot:"left"},[i("van-icon",{attrs:{name:"location-o"}}),t._v("\n      "+t._s(t.geoLocationCity)+"\n    ")],1),t._v(" "),i("van-icon",{attrs:{slot:"right",name:"search"},on:{click:function(s){return t.$router.push({name:"search"})}},slot:"right"})],1),t._v(" "),i("div",{ref:"list",staticClass:"list",class:{center:0===t.list.length},on:{scroll:t.handleScroll}},[t._l(t.list,function(s,o){return i("router-link",{key:"product-"+s.id,staticClass:"item",attrs:{to:"/product/"+s.id}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.cover,expression:"item.cover"}]}),t._v(" "),i("h3",[t._v(t._s(s.name))]),t._v(" "),i("div",{staticClass:"price clearfix"},[i("span",{staticClass:"price-l"},[t._v("￥")]),t._v(" "),i("span",{staticClass:"cprice"},[t._v(t._s(s.price))]),t._v(" "),i("span",{staticClass:"price-r"},[t._v("起")])])])}),t._v(" "),t.isLoading?i("van-loading",{attrs:{color:"#1989fa"}}):t._e()],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.listScrollTop>200,expression:"listScrollTop > 200"}],staticClass:"toTop",on:{click:t.toTop}},[i("van-icon",{attrs:{name:"upgrade"}})],1)],1)},staticRenderFns:[]};var e=i("VU/8")({data:function(){return{isLoading:!1,listScrollTop:0}},computed:{geoLocationCity:function(){return this.$store.geoLocationCity},page:function(){return this.$store.productData.page},total:function(){return this.$store.productData.total},list:function(){return this.$store.productData.list}},methods:{toTop:function(){this.$refs.list.scrollTop=0},handleScroll:function(){this.listScrollTop=this.$refs.list.scrollTop,this.page!=this.total&&(this.isLoading||this.$refs.list.clientHeight+this.$refs.list.scrollTop===this.$refs.list.scrollHeight&&(this.isLoading=!0,this.$store.productData.page++,this.getData()))},getData:function(){var t=this,s={page:this.page,size:10};this.$axios.get("/product/pagination",{params:s}).then(function(s){if(0==s.errcode){var i=s.data;t.$store.productData.total=i.totalPages,t.$store.productData.list=t.$store.productData.list.concat(i.data),t.$store.skeletonVisible=!1}t.isLoading=!1})}},mounted:function(){0===this.$store.productData.list.length?(this.isLoading=!0,this.getData()):this.$refs.list.scrollTop=this.$store.productData.scrollTop},beforeRouteLeave:function(t,s,i){this.$store.productData.scrollTop=this.$refs.list.scrollTop,i()}},o,!1,function(t){i("5dZq")},"data-v-90be45ea",null);s.default=e.exports},"5dZq":function(t,s){}});
//# sourceMappingURL=7.886acfdd1a6a22bd2385.js.map