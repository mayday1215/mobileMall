webpackJsonp([1],{"0fNE":function(t,s){},"2NXm":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i={components:{tabbar:a("lVqA").a},data:function(){return{isLoading:!1,listScrollTop:0}},computed:{geoLocationCity:function(){return this.$store.geoLocationCity},page:function(){return this.$store.productData.page},total:function(){return this.$store.productData.total},list:function(){return this.$store.productData.list}},methods:{toTop:function(){this.$refs.list.scrollTop=0},handleScroll:function(){this.listScrollTop=this.$refs.list.scrollTop,this.page!=this.total&&(this.isLoading||this.$refs.list.clientHeight+this.$refs.list.scrollTop===this.$refs.list.scrollHeight&&(this.isLoading=!0,this.$store.productData.page++,this.getData()))},getData:function(){var t=this,s={page:this.page,size:10};this.$axios.get("/product/pagination",{params:s}).then(function(s){if(0==s.errcode){var a=s.data;t.$store.productData.total=a.totalPages,t.$store.productData.list=t.$store.productData.list.concat(a.data),t.$store.skeletonVisible=!1}t.isLoading=!1})}},mounted:function(){0===this.$store.productData.list.length?(this.isLoading=!0,this.getData()):this.$refs.list.scrollTop=this.$store.productData.scrollTop},beforeRouteLeave:function(t,s,a){this.$store.productData.scrollTop=this.$refs.list.scrollTop,a()}},o={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("van-nav-bar",{attrs:{title:"精选"}},[a("div",{attrs:{slot:"left"},on:{click:function(s){return t.$router.push({name:"citySelect"})}},slot:"left"},[a("van-icon",{attrs:{name:"location-o"}}),t._v("\n      "+t._s(t.geoLocationCity)+"\n    ")],1),t._v(" "),a("van-icon",{attrs:{slot:"right",name:"search"},on:{click:function(s){return t.$router.push({name:"search"})}},slot:"right"})],1),t._v(" "),a("div",{ref:"list",staticClass:"list",class:{center:0===t.list.length},on:{scroll:t.handleScroll}},[t._l(t.list,function(s,i){return a("router-link",{key:"product-"+s.id,staticClass:"item",attrs:{to:"/product/"+s.id}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.cover,expression:"item.cover"}]}),t._v(" "),a("h3",[t._v(t._s(s.name))]),t._v(" "),a("div",{staticClass:"price clearfix"},[a("span",{staticClass:"price-l"},[t._v("￥")]),t._v(" "),a("span",{staticClass:"cprice"},[t._v(t._s(s.price))]),t._v(" "),a("span",{staticClass:"price-r"},[t._v("起")])])])}),t._v(" "),t.isLoading?a("van-loading",{attrs:{color:"#1989fa"}}):t._e()],2),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.listScrollTop>200,expression:"listScrollTop > 200"}],staticClass:"toTop",on:{click:t.toTop}},[a("van-icon",{attrs:{name:"upgrade"}})],1),t._v(" "),a("tabbar")],1)},staticRenderFns:[]};var e=a("VU/8")(i,o,!1,function(t){a("0fNE")},"data-v-3e7e262d",null);s.default=e.exports},lVqA:function(t,s,a){"use strict";var i={render:function(){var t=this.$createElement,s=this._self._c||t;return s("van-tabbar",{attrs:{route:""}},[s("van-tabbar-item",{attrs:{icon:"star-o",to:"/"}},[this._v("精选")]),this._v(" "),s("van-tabbar-item",{attrs:{icon:"cart-o",to:"/cart",info:this.$store.cartProductCount?this.$store.cartProductCount:""}},[this._v("购物车\n  ")]),this._v(" "),s("van-tabbar-item",{attrs:{icon:"contact",to:"/me"}},[this._v("我的")])],1)},staticRenderFns:[]};var o=a("VU/8")({},i,!1,function(t){a("ySzn")},null,null);s.a=o.exports},ySzn:function(t,s){}});
//# sourceMappingURL=1.882b5c712898a07a3454.js.map