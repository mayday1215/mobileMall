webpackJsonp([11],{SC19:function(t,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e={data:function(){return{showPayPassword:!1,payPassword:"",showBottomBar:!0,order:{}}},computed:{steps:function(){return this.order.order_status>=0?this.order.order_status:-1},address:function(){return this.order.userAddress?{title:this.order.userAddress.name+", "+this.order.userAddress.mobile,label:this.order.userAddress.province+" "+this.order.userAddress.city+" "+this.order.userAddress.country+" "+this.order.userAddress.detail}:{title:"",label:""}},id:function(){return this.$route.params.id},cart:function(){return this.$store.cart},productCounts:function(){var t=0;return this.orderProducts.reduce(function(r,s,e){return t+=s.count},t)},total:function(){var t=0;return"￥"+this.orderProducts.reduce(function(r,s,e){return t+=s.count*s.price},t)},orderProducts:function(){return Array.isArray(this.order.orderProducts)?this.order.orderProducts:[]}},watch:{payPassword:{handler:function(t){var r=this;t.length>=6&&this.$axios.post("/order/pay?order_id="+this.id,{pay_password:t}).then(function(t){r.payPassword="",0===t.errcode?r.$router.push({name:"paySuccess",query:{orderId:r.id}}):901201===t.errcode?r.$Toast(t.errmsg):r.$router.push({name:"payFail",query:{orderId:r.id}})})}}},methods:{onInput:function(t){this.payPassword=(this.payPassword+t).slice(0,6)},onDelete:function(){this.payPassword=this.payPassword.slice(0,this.payPassword.length-1)}},mounted:function(){var t=this;this.$axios.get("/order?id="+this.id).then(function(r){0===r.errcode&&(t.order=r.data)})}},a={render:function(){var t=this,r=t.$createElement,s=t._self._c||r;return s("div",[s("van-nav-bar",{attrs:{title:"订单详情","left-arrow":"","left-text":"返回"},on:{"click-left":function(r){return t.$router.back()}}}),t._v(" "),s("div",{staticClass:"list"},[s("van-steps",{attrs:{active:t.steps}},[s("van-step",[t._v("未付款")]),t._v(" "),s("van-step",[t._v("已付款")]),t._v(" "),s("van-step",[t._v("已发货")]),t._v(" "),s("van-step",[t._v("交易完成")])],1),t._v(" "),s("van-cell-group",{staticClass:"item-gap"},[s("van-cell",{attrs:{title:t.address.title,label:t.address.label}})],1),t._v(" "),s("van-cell-group",{staticClass:"item-gap"},t._l(t.orderProducts,function(t){return s("van-cell",{key:t.id,attrs:{title:t.name,value:t.count+"件",label:"￥"+t.price,icon:t.cover}})}),1)],1),t._v(" "),s("van-popup",{staticClass:"bottom-bar",attrs:{position:"bottom",overlay:!1},model:{value:t.showBottomBar,callback:function(r){t.showBottomBar=r},expression:"showBottomBar"}},[s("div",{staticClass:"total"},[t._v("\n      合计："),s("span",[t._v(t._s(t.total))])]),t._v(" "),0===t.order.order_status?s("van-button",{attrs:{type:"primary"},on:{click:function(r){t.showPayPassword=!0}}},[t._v("付款")]):t._e(),t._v(" "),1===t.order.order_status?s("van-tag",{staticClass:"text",attrs:{size:"large"}},[t._v("等待商家发货")]):t._e()],1),t._v(" "),s("van-popup",{staticClass:"van-popup-pay",attrs:{position:"bottom","close-on-click-overlay":!1},model:{value:t.showPayPassword,callback:function(r){t.showPayPassword=r},expression:"showPayPassword"}},[s("van-nav-bar",{staticClass:"pay-nav-bar",attrs:{title:"付款"},on:{"click-left":function(r){t.showPayPassword=!1}}},[s("van-icon",{attrs:{slot:"left",name:"cross"},slot:"left"})],1),t._v(" "),s("van-password-input",{attrs:{value:t.payPassword,info:"密码为 6 位数字"}}),t._v(" "),s("van-number-keyboard",{attrs:{show:t.showPayPassword},on:{input:t.onInput,delete:t.onDelete}})],1)],1)},staticRenderFns:[]};var o=s("VU/8")(e,a,!1,function(t){s("SIdl")},"data-v-56aea475",null);r.default=o.exports},SIdl:function(t,r){}});
//# sourceMappingURL=11.bd854817b801e2683bd9.js.map