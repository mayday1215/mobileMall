webpackJsonp([8],{Wyt2:function(t,e){},dwST:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{searchKey:"",cateId:0,filterIndex:0,categoryList:[{id:0,text:"全部",value:0}],filterList:[{text:"默认时间降序",value:"create_time,desc"},{text:"价格降序",value:"price,desc"},{text:"销量降序",value:"sales,desc"}],orderBy:"create_time,desc",page:1,total:1,isLoading:!1,list:[],timeout:null}},mounted:function(){var t=this;this.$refs.search.focus(),this.$axios.get("/category/all").then(function(e){0===e.errcode&&(e.data.forEach(function(t){t.text=t.name,t.value=t.id}),t.categoryList=t.categoryList.concat(e.data))})},computed:{by:function(){var t=this.orderBy.split(",");return 2==t.length?t[0]:""},order:function(){var t=this.orderBy.split(",");return 2==t.length?t[1]:""}},methods:{search:function(){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.list=[],t.page=1,t.total=1,t.isLoading=!0,t.getData()},500)},handleScroll:function(){this.page!=this.total&&(this.isLoading||this.$refs.list.clientHeight+this.$refs.list.scrollTop===this.$refs.list.scrollHeight&&(this.isLoading=!0,this.page++,this.getData()))},getData:function(){var t=this,e={page:this.page,key:this.searchKey};this.cateId>0&&(e.category_id=this.cateId),this.order&&(e.order=this.order),this.by&&(e.by=this.by),this.$axios.get("/product/pagination",{params:e}).then(function(e){if(0==e.errcode){var a=e.data;t.total=a.totalPages,t.list=t.list.concat(a.data)}t.isLoading=!1})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{attrs:{"left-arrow":"","left-text":"返回"},on:{"click-left":function(e){return t.$router.back()}}},[a("van-field",{ref:"search",attrs:{slot:"title",placeholder:"请输入关键字"},on:{keyup:t.search},slot:"title",model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1),t._v(" "),a("van-dropdown-menu",[a("van-dropdown-item",{attrs:{options:t.categoryList},on:{change:t.search},model:{value:t.cateId,callback:function(e){t.cateId=e},expression:"cateId"}}),t._v(" "),a("van-dropdown-item",{attrs:{options:t.filterList},on:{change:t.search},model:{value:t.orderBy,callback:function(e){t.orderBy=e},expression:"orderBy"}})],1),t._v(" "),a("div",{ref:"list",staticClass:"list",on:{scroll:t.handleScroll}},[t._l(t.list,function(e,i){return a("router-link",{key:"product-"+e.id,staticClass:"item",attrs:{to:"/product/"+e.id}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.cover,expression:"item.cover"}]}),t._v(" "),a("h3",[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"price clearfix"},[a("span",{staticClass:"price-l"},[t._v("￥")]),t._v(" "),a("span",{staticClass:"cprice"},[t._v(t._s(e.price))]),t._v(" "),a("span",{staticClass:"price-r"},[t._v("起")])])])}),t._v(" "),t.isLoading?a("van-loading",{attrs:{color:"#1989fa"}}):t._e()],2)],1)},staticRenderFns:[]};var r=a("VU/8")(i,s,!1,function(t){a("Wyt2")},"data-v-d5486f32",null);e.default=r.exports}});
//# sourceMappingURL=8.b32bfe4b8a2211be98e6.js.map