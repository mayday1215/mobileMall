webpackJsonp([10],{BEuR:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e("mvHQ"),s=e.n(r),o={data:function(){return{tabIndex:0,product:{id:this.$route.params.id}}},computed:{isLike:function(){var t=this;return!!this.likeList.find(function(i){return i.product_id==t.id})},likeList:function(){return Array.isArray(this.$store.user.likeList)?this.$store.user.likeList:[]},likeIcon:function(){return this.isLike?"like":"like-o"},id:function(){return parseInt(this.$route.params.id)}},mounted:function(){var t=this;this.$axios.get("/product?id="+this.id).then(function(i){0===i.errcode&&(t.product=i.data)})},methods:{like:function(){var t=this;this.isLike?this.$axios.get("/product_like/delete?product_id="+this.id).then(function(i){if(0===i.errcode)for(var e=0;e<t.$store.user.likeList.length;e++)if(t.id==t.$store.user.likeList[e].product_id){t.$store.user.likeList.splice(e,1),t.product.likes--;break}}):this.$axios.post("/product_like/create",{product_id:this.id}).then(function(i){0===i.errcode&&(t.$store.user.likeList.push(i.data),t.product.likes++)})},buy:function(){sessionStorage.buyProducts=s()([{product_id:this.id,name:this.product.name,price:this.product.price,cover:this.product.cover,count:1}]),this.$router.push({name:"orderConfirm"})},addCart:function(){var t=this;this.$axios.post("/cart/update",{product_id:this.id}).then(function(i){if(0===i.errcode)t.$store.cart=i.data,t.$Toast("添加成功！");else if(90101===i.errcode){var e=!0;if(t.$store.cart.forEach(function(i){i.product_id===t.id&&(i.count++,e=!1)}),e){var r=t.product,o=r.name,n=r.price,a=r.cover;t.$store.cart.push({product_id:t.id,count:1,name:o,price:n,cover:a,checked:1})}localStorage.cart=s()(t.$store.cart)}})},sorry:function(){this.$Toast("有待开发~")}}},n={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"goods"},[e("van-nav-bar",{attrs:{fixed:"","left-arrow":"","left-text":"返回",title:"详情"},on:{"click-left":function(i){return t.$router.back()}}}),t._v(" "),e("van-swipe",{staticClass:"goods-swipe",attrs:{autoplay:3e3}},t._l(t.product.imgList,function(t){return e("van-swipe-item",{key:"img-"+t.id},[e("van-image",{attrs:{src:t.path}})],1)}),1),t._v(" "),e("van-cell-group",[e("van-cell",[e("div",{staticClass:"goods-title"},[t._v(t._s(t.product.name))]),t._v(" "),e("div",{staticClass:"goods-price"},[t._v("￥"+t._s(t.product.price))])]),t._v(" "),e("van-cell",{staticClass:"goods-express"},[e("van-col",{attrs:{span:"10"}},[t._v("免运费")]),t._v(" "),e("van-col",{attrs:{span:"14"}},[t._v("剩余："+t._s(t.product.stock)+"件")])],1),t._v(" "),e("van-cell",{staticClass:"goods-express"},[e("van-col",{attrs:{span:"10"}},[t._v("销量："+t._s(t.product.sales))]),t._v(" "),e("van-col",{attrs:{span:"14"}},[t._v("收藏数："+t._s(t.product.likes))])],1)],1),t._v(" "),e("van-tabs",{attrs:{sticky:""},model:{value:t.tabIndex,callback:function(i){t.tabIndex=i},expression:"tabIndex"}},[e("van-tab",{attrs:{title:"详情"}},t._l(t.product.detailImgList,function(t){return e("van-image",{key:"detail-img-"+t.id,attrs:{src:t.path}})}),1),t._v(" "),e("van-tab",{attrs:{title:"参数"}},t._l(t.product.properties,function(i){return e("van-cell",{key:"property-"+i.id,staticClass:"goods-express"},[e("van-col",{attrs:{span:"10"}},[t._v(t._s(i.name))]),t._v(" "),e("van-col",{attrs:{span:"14"}},[t._v(t._s(i.detail))])],1)}),1)],1),t._v(" "),e("van-goods-action",[e("van-goods-action-icon",{attrs:{icon:t.likeIcon},on:{click:t.like}},[t._v("\n      收藏\n    ")]),t._v(" "),e("van-goods-action-icon",{attrs:{icon:"cart-o"},on:{click:function(i){return t.$router.push({name:"cart"})}}},[t._v("\n      购物车\n    ")]),t._v(" "),e("van-goods-action-button",{attrs:{type:"warning"},on:{click:t.addCart}},[t._v("\n      加入购物车\n    ")]),t._v(" "),e("van-goods-action-button",{attrs:{type:"danger"},on:{click:t.buy}},[t._v("\n      立即购买\n    ")])],1)],1)},staticRenderFns:[]};var a=e("VU/8")(o,n,!1,function(t){e("NCoJ")},"data-v-95b94f6e",null);i.default=a.exports},NCoJ:function(t,i){}});
//# sourceMappingURL=10.15c378433ad17926e5fd.js.map